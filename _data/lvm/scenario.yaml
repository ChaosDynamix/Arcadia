####################################
# LUKS ON SINGLE PARTITION         #
####################################

b84ab5fb-9500-4b17-b322-bd04e31f5d3a  : !!map
  has_fstab               : !!bool false
  has_crypttab            : !!bool false
  has_crypttab_initramfs  : !!bool false
  has_initramfs           : !!bool true
  has_grub                : !!bool true
  has_swapfile            : !!bool false
  has_systemd             : !!bool false

  template      : !!str luks_single_partition
  controller    : !!str lvm
  pacstrap      : !!str lvm2

  lvm       : !!map
    profile : !!str lvm_luks
    pv      : !!str /dev/mapper/cryptsystem

  initramfs : !!str |
              FILES=(/etc/luks-keys/cryptsystem.keyfile)
              HOOKS=(base udev autodetect modconf block encrypt lvm2 filesystems keyboard keymap fsck)

  grub      : !!str |
              GRUB_CMDLINE_LINUX_DEFAULT="cryptdevice=UUID=device_uuid:cryptsystem:allow-discards cryptkey=rootfs:/etc/luks-keys/cryptsystem.keyfile root=/dev/grp/root loglevel=3 quiet"
              GRUB_ENABLE_CRYPTODISK=y

####################################
# LUKS ON MULTIPLE PARTITIONS      #
####################################

66df9fd1-5ee6-42a1-831e-b3b9d6e26524  : !!map
  has_fstab               : !!bool false
  has_crypttab            : !!bool false
  has_crypttab_initramfs  : !!bool true
  has_initramfs           : !!bool true
  has_grub                : !!bool true
  has_swapfile            : !!bool false
  has_systemd             : !!bool true

  template    : !!str luks_multiple_partitions
  controller  : !!str lvm
  pacstrap    : !!str lvm2

  lvm       : !!map
    profile : !!str lvm_luks
    pv      : !!str /dev/mapper/cryptsystemUUID /dev/mapper/cryptsystemUUID

  crypttab_initramfs  : !!str |
                        cryptsystemUUID     UUID=device_UUID   /etc/luks-keys/cryptsystemUUID.keyfile
                        cryptsystemUUID     UUID=device_UUID   /etc/luks-keys/cryptsystemUUID.keyfile

  initramfs : !!str |
              FILES=(/etc/luks-keys/cryptsystemUUID.keyfile /etc/luks-keys/cryptsystemUUID.keyfile)
              HOOKS=(base systemd autodetect modconf block sd-encrypt sd-lvm2 filesystems keyboard sd-vconsole fsck)

  grub      : !!str |
              GRUB_CMDLINE_LINUX_DEFAULT="rd.luks.options=discard root=/dev/grp/root loglevel=3 quiet"
              GRUB_ENABLE_CRYPTODISK=y

####################################
# LUKS ON RAID                     #
####################################

ff8a81bc-82d1-440a-9f71-df9676a19a26  : !!map
  has_fstab               : !!bool false
  has_crypttab            : !!bool false
  has_crypttab_initramfs  : !!bool false
  has_initramfs           : !!bool true
  has_grub                : !!bool true
  has_swapfile            : !!bool false
  has_systemd             : !!bool false

  template    : !!str luks_raid
  controller  : !!str lvm
  pacstrap    : !!str lvm2 mdadm

  lvm       : !!map
    profile : !!str lvm_luks
    pv      : !!str /dev/mapper/cryptsystem

  initramfs : !!str |
              FILES=(/etc/luks-keys/cryptsystem.keyfile)
              HOOKS=(base udev autodetect modconf block mdadm_udev encrypt lvm2 filesystems keyboard keymap fsck)

  grub      : !!str |
              GRUB_CMDLINE_LINUX_DEFAULT="cryptdevice=UUID=device_uuid:cryptsystem:allow-discards cryptkey=rootfs:/etc/luks-keys/cryptsystem.keyfile root=/dev/grp/root loglevel=3 quiet"
              GRUB_ENABLE_CRYPTODISK=y

####################################
# LUKS ON LOGICAL VOLUMES          #
####################################

a852843f-53ac-47e9-a82d-d6cf288c8b76  : !!map
  has_fstab               : !!bool true
  has_crypttab            : !!bool true
  has_crypttab_initramfs  : !!bool false
  has_initramfs           : !!bool true
  has_grub                : !!bool true
  has_swapfile            : !!bool false
  has_systemd             : !!bool false

  template    : !!str luks_logical_volumes
  controller  : !!str lvm
  pacstrap    : !!str lvm2

  lvm       : !!map
    profile : !!str luks_lvm
    pv      : !!str /dev/sda2 /dev/sdb1

  fstab     : !!str |
              /dev/mapper/swap    none    swap    sw          0 0
              /dev/mapper/home    /home   ext4    defaults    0 2

  crypttab  : !!str |
              swap    /dev/grp/cryptswap     /dev/urandom          swap,cipher=aes-xts-plain64,size=256
              home    /dev/grp/crypthome     /etc/luks-keys/crypthome.keyfile

  initramfs : !!str |
              FILES=(/etc/luks-keys/cryptroot.keyfile)
              HOOKS=(base udev autodetect modconf block encrypt lvm2 filesystems keyboard keymap fsck)

  grub      : !!str |
              GRUB_CMDLINE_LINUX_DEFAULT="cryptdevice=UUID=device_uuid:root:allow-discards cryptkey=rootfs:/etc/luks-keys/cryptroot.keyfile root=/dev/mapper/root loglevel=3 quiet"
              GRUB_ENABLE_CRYPTODISK=y
