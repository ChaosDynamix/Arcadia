has_fstab_cfg               : !!bool false
has_crypttab_cfg            : !!bool false
has_crypttab_initramfs_cfg  : !!bool false
has_initramfs_cfg           : !!bool true
has_grub_cfg                : !!bool true
has_swapfile                : !!bool false
has_systemd                 : !!bool false
has_needed_packages         : !!bool true
has_raid                    : !!bool false
has_encryption              : !!bool true

needed_packages : !!str lvm2

# DEVICES
devices   : !!seq
  - !!map
    node  : !!str /dev/sda

# PARTITIONS
partitions: !!seq
  - !!map
    node  : !!str /dev/sda1
    type  : !!str mode_partition_type
    size  : !!str mode_partition_size
  - !!map
    node  : !!str /dev/sda2
    type  : !!str Linux LUKS partition
    size  : !!str 100%FREE

# EFI
efi       : !!map
  node    : !!str /dev/sda1
  context : !!str partition

# ENCRYPTION
encryption      : !!map
  steps         : !!seq
    - !!map
      id        : !!int 1
      title     : !!str Encrypt the LUKS partition
  containers    : !!seq
    - !!map
      step_id           : !!int 1
      keyfile_id        : !!int 1
      is_headerless     : !!bool false
      is_bootable       : !!bool true
      has_password      : !!bool true
      has_keyfile       : !!bool true
      has_init_keyfile  : !!bool false
      name              : !!str cryptlvm
      node              : !!str /dev/sda2
      type              : !!str luks1
  keyfiles      : !!seq
    - !!map
      id        : !!int 1
      name      : !!str cryptlvm
      path      : !!str /etc/luks-keys/cryptlvm.keyfile

# LOGICAL VOLUME MANAGER
lvm         : !!map
  template  : !!str lvm-luks
  pv        : !!str /dev/mapper/cryptlvm

# CONFIGURATIONS
initramfs_cfg : !!str |
                FILES=(/etc/luks-keys/cryptsystem.keyfile)
                HOOKS=(base udev autodetect modconf block encrypt lvm2 filesystems keyboard keymap fsck)

grub_cfg      : !!str |
                GRUB_CMDLINE_LINUX_DEFAULT="cryptdevice=UUID=device_uuid:cryptlvm:allow-discards cryptkey=rootfs:/etc/luks-keys/cryptlvm.keyfile root=/dev/grp/root loglevel=3 quiet"
                GRUB_ENABLE_CRYPTODISK=y

# SCRIPTS
sgdisk            : !!map
  has_fixed_size  : !!bool true
  script          : !!str |
                    $ sgdisk -o mode_sgdisk -n=2:0:0 -t=2:8309 /dev/sda
