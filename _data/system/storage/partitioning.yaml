modes: !!seq

  - title     : !!str BIOS / GPT
    sgdisk    : !!str -n=1:0:+1M -t=1:ef02
    partition : !!map
      type    : !!srt BIOS boot partition
      size    : !!str 1M

  - title     : !!str UEFI / GPT
    sgdisk    : !!str -n=1:0:+260M -t=1:ef00
    partition : !!map
      type    : !!srt EFI system partition
      size    : !!str 260M

scenarios: !!map

  # LUKS ON SINGLE PARTITION
  luks_single_partition: !!map
    plural  : !!bool false
    sgdisk  : !!str |
              $ sgdisk -o mode_sgdisk -n=2:0:0 -t=2:8309 /dev/sda
    partitions  : !!seq
      - !!map
        node  : !!str /dev/sda1
        type  : !!str mode_partition_type
        size  : !!str mode_partition_size
      - !!map
        node  : !!str /dev/sda2
        type  : !!str Linux LUKS partition
        size  : !!str 100%FREE

  # LUKS ON MULTIPLE PARTITIONS
  luks_multiple_partitions: !!map
    plural  : !!bool true
    sgdisk  : !!str |
                  $ sgdisk -o mode_sgdisk -n=2:0:0 -t=2:8309 /dev/sda
                  $ sgdisk -o -n=1:0:0 -t=1:8309 /dev/sdb
    partitions  : !!seq
      - !!map
        node  : !!str /dev/sda1
        type  : !!str mode_partition_type
        size  : !!str mode_partition_size
      - !!map
        node  : !!str /dev/sda2
        type  : !!str Linux LUKS partition
        size  : !!str 100%FREE
      - !!map
        node  : !!str /dev/sdb1
        type  : !!str Linux LUKS partition
        size  : !!str 100%FREE

  # LUKS ON RAID
  luks_raid: !!map
    plural  : !!bool true
    sgdisk  : !!str |
              $ sgdisk -o mode_sgdisk -n=2:0:-100M -t=2:fd00 -R=/dev/sdb /dev/sda
              $ sgdisk -G /dev/sdb
    partitions  : !!seq
      - !!map
        node  : !!str /dev/sda1
        type  : !!str mode_partition_type
        size  : !!str mode_partition_size
      - !!map
        node  : !!str /dev/sda2
        type  : !!str Linux RAID partition
        size  : !!str 100%FREE - 100M
      - !!map
        node  : !!str /dev/sdb1
        type  : !!str mode_partition_type
        size  : !!str mode_partition_size
      - !!map
        node  : !!str /dev/sdb2
        type  : !!str Linux RAID partition
        size  : !!str 100%FREE - 100M

  # LUKS ON LOGICAL VOLUMES
  luks_logical_volumes: !!map
    plural  : !!bool true
    sgdisk  : !!str |
              $ sgdisk -o mode_sgdisk -n=2:0:0 -t=2:8e00 /dev/sda
              $ sgdisk -o -n=1:0:0 -t=1:8e00 /dev/sdb
    partitions  : !!seq
      - !!map
        node  : !!str /dev/sda1
        type  : !!str mode_partition_type
        size  : !!str mode_partition_size
      - !!map
        node  : !!str /dev/sda2
        type  : !!str Linux LVM
        size  : !!str 100%FREE
      - !!map
        node  : !!str /dev/sdb1
        type  : !!str Linux LVM
        size  : !!str 100%FREE
