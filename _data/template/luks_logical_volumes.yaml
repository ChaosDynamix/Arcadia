####################################
# SCRIPT (MANDATORY)               #
####################################

sgdisk  : !!str |
          $ sgdisk -o mode_sgdisk -n=2:0:0 -t=2:8e00 /dev/sda
          $ sgdisk -o -n=1:0:0 -t=1:8e00 /dev/sdb

####################################
# STORAGE (MANDATORY)              #
####################################

devices   : !!seq
  - !!map
    node  : !!str /dev/sda
  - !!map
    node  : !!str /dev/sdb

partitions: !!seq
  - !!map
    node  : !!str /dev/sda1
    boot  : !!bool true
    type  : !!str mode_partition_type
    size  : !!str mode_partition_size
  - !!map
    node  : !!str /dev/sda2
    boot  : !!bool false
    type  : !!str Linux LVM
    size  : !!str 100%FREE
  - !!map
    node  : !!str /dev/sdb1
    boot  : !!bool false
    type  : !!str Linux LVM
    size  : !!str 100%FREE

efi       : !!map
  node    : !!str /dev/sda1
  context : !!str partition

####################################
# RAID                             #
####################################

has_raid  : !!bool false

####################################
# ENCRYPTION                       #
####################################

has_encryption  : !!bool true

encryption      : !!map
  headerless    : !!bool false

  steps         : !!seq
    - !!map
      id        : !!int 1
      title     : !!str Encrypt the Root container
    - !!map
      id        : !!int 2
      title     : !!str Encrypt the Home container

  containers    : !!seq
    - !!map
      step_id           : !!int 1
      is_headerless     : !!bool false
      is_bootable       : !!bool true
      has_password      : !!bool true
      has_keyfile       : !!bool true
      has_init_keyfile  : !!bool false
      name              : !!str root
      node              : !!str /dev/grp/cryptroot
      type              : !!str luks1
      keyfile           : !!str /etc/luks-keys/cryptroot.keyfile
    - !!map
      step_id           : !!int 2
      is_headerless     : !!bool false
      is_bootable       : !!bool false
      has_password      : !!bool false
      has_keyfile       : !!bool true
      has_init_keyfile  : !!bool true
      name              : !!str home
      node              : !!str /dev/grp/crypthome
      type              : !!str luks1
      keyfile           : !!str /etc/luks-keys/crypthome.keyfile
